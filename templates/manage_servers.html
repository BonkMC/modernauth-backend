<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Manage Servers - ModernAuth Admin Panel</title>
    <link rel="stylesheet" href="/assets/style.css">
</head>
<body>

<header class="top-nav">
    <a class="button" href="/">Home</a>
    <a class="button" href="/admin">Admin Panel</a>
    <a class="button" href="/settings">Settings</a>
    <a class="button" href="/logout">Logout</a>
    <div class="logo">
        <img src="/assets/ma_logo.png" alt="Logo">
    </div>
</header>

<div class="container">
    <h1>Server Management</h1>
    {% if message %}
        <p style="color: #ff6700;">{{ message }}</p>
    {% endif %}

    <!-- Form to add a new server -->
    <section style="margin-bottom: 40px;">
        <h2>Add New Server</h2>
        <form method="POST" action="/admin/manage">
            <input type="hidden" name="action" value="add_server">
            <label for="server_id" style="color: #ccc;">Server ID:</label>
            <input type="text" name="server_id" id="server_id" required>
            <button type="submit" class="button">Add Server</button>
        </form>
    </section>

    <!-- Form to generate manager invitation link -->
    <section style="margin-bottom: 40px;">
        <h2>Generate Manager Details Retrival Link</h2>
        <form method="POST" action="/admin/manage">
            <input type="hidden" name="action" value="generate_invite">
            <label for="server_id_invite" style="color: #ccc;">Server ID:</label>
            <select name="server_id" id="server_id_invite" required>
                {% for server in servers %}
                    <option value="{{ server }}">{{ server }}</option>
                {% endfor %}
            </select>
            <button type="submit" class="button">Generate Invitation Link</button>
        </form>
        {% if invite_link %}
            <p>Invitation Link: <a href="{{ invite_link }}" style="color: #ff6700;">{{ invite_link }}</a></p>
        {% endif %}
    </section>

    <!-- New section: Add Manager Directly -->
    <section style="margin-bottom: 40px;">
        <h2>Add Manager From Details</h2>
        <form method="POST" action="/admin/manage">
            <input type="hidden" name="action" value="add_manager_direct">
            <label for="server_id_direct" style="color: #ccc;">Server ID:</label>
            <select name="server_id" id="server_id_direct" required>
                {% for server in servers %}
                    <option value="{{ server }}">{{ server }}</option>
                {% endfor %}
            </select><br><br>
            <label for="auth0_id" style="color: #ccc;">Auth0 ID:</label>
            <input type="text" name="auth0_id" id="auth0_id" required><br><br>
            <label for="email_direct" style="color: #ccc;">Email:</label>
            <input type="email" name="email" id="email_direct" required><br><br>
            <button type="submit" class="button">Add Manager Directly</button>
        </form>
    </section>

    <p class="footer">Powered by ModernAuth | Developed by BonkMC<br>
        <u><a href="/whoweare" style="color: inherit; text-decoration: none;">Who We Are</a></u>
    </p>
</div>

</body>
</html>
